<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:BuzzahBuddy.ViewModels"
             x:Class="BuzzahBuddy.MainPage"
             x:DataType="vm:MainPageViewModel"
             Title="{Binding Title}">

    <RefreshView IsRefreshing="{Binding IsRefreshing}"
                 Command="{Binding RefreshCommand}"
                 RefreshColor="{StaticResource Primary}">
        <ScrollView>
            <VerticalStackLayout Padding="20" Spacing="25">

                <!-- App Logo/Header -->
                <Image Source="title"
                       HeightRequest="60"
                       HorizontalOptions="Center"
                       Margin="0,20,0,10"
                       SemanticProperties.Description="BuzzahBuddy Logo"
                       Aspect="AspectFit" />

                <Label Text="BlueBuzzah Glove Companion"
                       Style="{StaticResource SubHeadline}"
                       SemanticProperties.HeadingLevel="Level2"
                       HorizontalOptions="Center"
                       Margin="0,0,0,30" />

                <!-- Connection Status Card -->
                <Frame Padding="20"
                       CornerRadius="12"
                       HasShadow="True"
                       BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="Connection Status"
                               FontSize="18"
                               FontAttributes="Bold"
                               SemanticProperties.HeadingLevel="Level3" />

                        <Label Text="{Binding ConnectedDeviceName}"
                               FontSize="16"
                               VerticalOptions="Center"
                               SemanticProperties.Description="Connected device status" />

                        <Label Text="{Binding BatteryLevel, StringFormat='Battery: {0}%'}"
                               FontSize="14"
                               IsVisible="{Binding IsConnected}"
                               SemanticProperties.Description="Device battery level" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Quick Actions -->
                <Label Text="Quick Actions"
                       FontSize="18"
                       FontAttributes="Bold"
                       Margin="0,10,0,5"
                       SemanticProperties.HeadingLevel="Level3" />

                <Button Text="Find Gloves"
                        Command="{Binding NavigateToDeviceListCommand}"
                        HeightRequest="56"
                        FontSize="18"
                        CornerRadius="12"
                        SemanticProperties.Hint="Navigate to device scanning page"
                        SemanticProperties.Description="Scan for and connect to BlueBuzzah gloves"
                        AutomationId="FindGlovesButton" />

                <Button Text="Control Glove"
                        Command="{Binding NavigateToControlCommand}"
                        HeightRequest="56"
                        FontSize="18"
                        CornerRadius="12"
                        IsEnabled="{Binding IsConnected}"
                        SemanticProperties.Hint="Navigate to glove control page"
                        SemanticProperties.Description="Control vibration patterns and intensity"
                        AutomationId="ControlGloveButton" />

            </VerticalStackLayout>
        </ScrollView>
    </RefreshView>

</ContentPage>
